command:
  - ruby
  - fixtures/environment.rb

tests:
  - name: environment
    environment:
      TEST_ENV: "test-value"
    args:
      - TEST_ENV
    stdout: |
      test-value

  - name: inherits
    args:
      - ONLY_DEFINED_IN_SPEC
    stdout: |
      defined_in_spec

  - name: overwrites
    environment:
      OVERWRITE_IN_FIXTURE: "overwritten"
    args:
      - OVERWRITE_IN_FIXTURE
    stdout: |
      overwritten

  - name: not-defined
    args:
      - NOT_DEFINED
    stdout: "\n"

  - name: spec-is-merged-into-fixture-not-replaced
    environment:
      OVERWRITE_IN_FIXTURE: "overwritten"
    args:
      - OVERWRITE_IN_FIXTURE
      - ONLY_DEFINED_IN_SPEC
    stdout: |
      overwritten
      defined_in_spec
